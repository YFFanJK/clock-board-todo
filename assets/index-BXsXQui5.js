function e(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}import{S as t,d as a,r as l,c as n,a as o,o as s,b as i,t as r,e as c,u,C as d,f as v,F as h,g as f,n as p,h as m,i as w,w as g,j as x,k as y,s as b,l as k,m as _,X as M,p as C,v as T,q as S,R as E,x as L,D,P as I,Z as j,y as N,L as O,z as A,A as P,B as W,T as R,E as F,G as J,H as z,I as U,J as V,K as H,M as B,N as X,O as Y,Q as $,U as K,V as q,W as G,Y as Q,_ as Z,$ as ee,a0 as te,a1 as ae,a2 as le}from"./vendor-DZ7VdSxw.js";function ne(e){try{const a=t.fromDate(e),l=a.getLunar(),n=l.getMonthInChinese(),o=l.getDayInChinese(),s=l.getYearInGanZhiByLiChun(),i=l.getJieQi(),r=l.getFestivals(),c=a.getFestivals(),u=[...r,...c],d=u.length>0?u[0]:i||"",v="åˆä¸€"===o?"".concat(n,"æœˆ"):o;return{fullDate:d?"".concat(v," Â· ").concat(d):v,date:d||v,year:"".concat(s,"å¹´"),month:"".concat(n,"æœˆ"),isFestival:!!d,festival:d}}catch(a){return console.error("Lunar date error (lunar-typescript):",a),{fullDate:"åŠ è½½å¤±è´¥",date:"åŠ è½½å¤±è´¥",year:"--å¹´",month:"åŠ è½½å¤±è´¥",isFestival:!1}}}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const oe={class:"full-screen-calendar text-white"},se={class:"flex items-center justify-between w-full mb-8 px-4 md:px-12"},ie={class:"text-left"},re={class:"text-4xl md:text-5xl font-bold tracking-widest"},ce={class:"text-lg opacity-50 tracking-[0.4em] uppercase mt-1"},ue={class:"flex items-center gap-3"},de={class:"flex-1 flex flex-col w-full"},ve={class:"grid grid-cols-7 mb-2"},he={class:"calendar-grid"},fe={class:"day-number-wrapper flex flex-col items-center justify-center"},pe={class:"text-2xl md:text-3xl font-bold"},me=(e,t)=>{const a=e.__vccOpts||e;for(const[l,n]of t)a[l]=n;return a},we=me(a({__name:"CalendarView",setup(e,{expose:t}){const a=l(new Date),m=l(new Date),w=n(()=>a.value.getFullYear()),g=n(()=>a.value.getMonth()),x=["January","February","March","April","May","June","July","August","September","October","November","December"],y=n(()=>w.value===m.value.getFullYear()&&g.value===m.value.getMonth()),b=n(()=>{const e=w.value,t=g.value,a=new Date(e,t,1).getDay(),l=new Date(e,t+1,0).getDate(),n=new Date(e,t,0).getDate(),o=[];for(let i=a-1;i>=0;i--){const a=new Date(e,t-1,n-i);o.push({date:a,isOtherMonth:!0,lunar:ne(a)})}for(let i=1;i<=l;i++){const a=new Date(e,t,i);o.push({date:a,isOtherMonth:!1,isToday:a.toDateString()===m.value.toDateString(),lunar:ne(a)})}const s=42-o.length;for(let i=1;i<=s;i++){const a=new Date(e,t+1,i);o.push({date:a,isOtherMonth:!0,lunar:ne(a)})}return o});function k(e){const t=new Date(a.value);t.setMonth(t.getMonth()+e),a.value=t}function _(){m.value=new Date,a.value=new Date}return t({refreshToday:function(){m.value=new Date,y.value&&(a.value=new Date)}}),(e,t)=>(s(),o("div",oe,[i("div",se,[i("div",ie,[i("h2",re,r(w.value)+"å¹´"+r(g.value+1)+"æœˆ ",1),i("p",ce,r(x[g.value]),1)]),i("div",ue,[i("button",{class:"p-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300",onClick:t[0]||(t[0]=e=>k(-1))},[c(u(d),{class:"w-6 h-6"})]),i("button",{class:"px-6 py-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300 text-md font-medium",onClick:_}," ä»Šå¤© "),i("button",{class:"p-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300",onClick:t[1]||(t[1]=e=>k(1))},[c(u(v),{class:"w-6 h-6"})])])]),i("div",de,[i("div",ve,[(s(),o(h,null,f(["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"],e=>i("div",{key:e,class:"calendar-header-day text-xl font-bold"},r(e),1)),64))]),i("div",he,[(s(!0),o(h,null,f(b.value,(e,t)=>(s(),o("div",{key:t,class:p(["calendar-day",{"other-month":e.isOtherMonth,today:e.isToday}])},[i("div",fe,[i("span",pe,r(e.date.getDate()),1),i("span",{class:p(["lunar-text text-sm font-normal mt-1",e.lunar.isFestival?"text-blue-300 opacity-100":"opacity-60"])},r(e.lunar.date),3)])],2))),128))])])]))}}),[["__scopeId","data-v-f23083ca"]]);const ge={class:"digit-item"},xe={class:"digit-item"},ye=me(a({__name:"Digit",props:{value:{},trigger:{}},setup(e){const t=e,a=l(t.value),n=l(t.value),c=l(!1),u=l("rotate(".concat((12*Math.random()-6).toFixed(1),"deg)"));return g(()=>t.trigger,()=>{u.value="rotate(".concat((12*Math.random()-6).toFixed(1),"deg)")}),g(()=>t.value,(e,t)=>{e!==t&&(u.value="rotate(".concat((12*Math.random()-6).toFixed(1),"deg)"),n.value=e,c.value=!0,setTimeout(()=>{c.value=!1,a.value=e},800))}),m(()=>{a.value=t.value,n.value=t.value}),(e,t)=>(s(),o("div",{class:"digit-container",style:x({transform:u.value})},[i("div",{class:p(["digit-window",{animating:c.value}])},[i("div",ge,r(a.value),1),i("div",xe,r(n.value),1)],2)],4))}}),[["__scopeId","data-v-ffa39005"]]);function be(e,t=!0){const a="./weather-icons/".concat(-1===e?"not-available":0===e?t?"clear-day":"clear-night":1===e||2===e?t?"partly-cloudy-day":"partly-cloudy-night":3===e?"overcast":45===e||48===e?t?"fog-day":"fog-night":e>=51&&e<=55?"drizzle":e>=61&&e<=65?"rain":66===e||67===e?"sleet":e>=71&&e<=77?"snow":e>=80&&e<=82?t?"partly-cloudy-day-rain":"partly-cloudy-night-rain":85===e||86===e?t?"partly-cloudy-day-snow":"partly-cloudy-night-snow":e>=95?t?"thunderstorms-day-rain":"thunderstorms-night-rain":t?"clear-day":"clear-night",".svg");return{text:{0:"æ™´æœ—",1:"æ™´é—´å¤šäº‘",2:"å¤šäº‘",3:"é˜´",45:"é›¾",48:"æ²‰ç§¯é›¾",51:"å°æ¯›æ¯›é›¨",53:"æ¯›æ¯›é›¨",55:"å¤§æ¯›æ¯›é›¨",56:"è½»å¾®å†»æ¯›æ¯›é›¨",57:"å†»æ¯›æ¯›é›¨",61:"å°é›¨",63:"ä¸­é›¨",65:"å¤§é›¨",66:"è½»å¾®å†»é›¨",67:"å†»é›¨",71:"å°é›ª",73:"ä¸­é›ª",75:"å¤§é›ª",77:"é›ªç²’",80:"å°é˜µé›¨",81:"é˜µé›¨",82:"å¼ºé˜µé›¨",85:"å°é˜µé›ª",86:"é˜µé›ª",95:"é›·é˜µé›¨",96:"é›·é›¨ä¼´æœ‰å†°é›¹",99:"å¼ºé›·é›¨ä¼´å†°é›¹"}[e]||"æœªçŸ¥",icon:a}}const ke=y("weather",()=>{const e=l("auto"),t=l(39.9),a=l(116.4),n=l("åŒ—äº¬å¸‚"),o=l(20),s=l(!0),i=l(!0),r=l(!0),c=l(null),u=l(!1),d=l("å®šä½ä¸­..."),v=l({text:"ç‚¹å‡»åˆ·æ–°",icon:be(-1).icon}),h=l(null);async function f(e,t,a,l=!1){const n="https://api.open-meteo.com/v1/forecast?latitude=".concat(e,"&longitude=").concat(t,"&current=temperature_2m,rain,wind_speed_10m,is_day,apparent_temperature,showers,relative_humidity_2m,precipitation,weather_code&hourly=precipitation_probability,uv_index,temperature_2m&timezone=auto&forecast_days=1");try{const o=await fetch(n),s=await o.json(),i=(new Date).getHours();s.current_hour_index=i,c.value=s,v.value=be(s.current.weather_code,1===s.current.is_day),u.value=!1,a?(d.value=a,l&&(h.value={lat:e,lon:t,city:a})):d.value.includes("å®šä½ä¸­")&&(d.value="".concat(t.toFixed(2),", ").concat(e.toFixed(2)))}catch(o){v.value.text="æŽ¥å£é”™è¯¯",v.value.icon=be(-1).icon,u.value=!1}}async function p(e,t){try{const a=await fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(e,"&longitude=").concat(t,"&localityLanguage=zh")),l=await a.json();return l.city||l.locality||l.principalSubdivision||"æœªçŸ¥åŸŽå¸‚"}catch(a){return"".concat(t.toFixed(2),", ").concat(e.toFixed(2))}}async function m(){try{const e=await fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?localityLanguage=zh"),t=await e.json();if(!t.latitude||!t.longitude)throw new Error("å®šä½å¤±è´¥");{const e=t.city||t.locality||t.principalSubdivision||"æœªçŸ¥åŸŽå¸‚";await f(t.latitude,t.longitude,e,!0)}}catch(e){await f(39.9,116.4,"åŒ—äº¬å¸‚ (é»˜è®¤)")}}return g(e,e=>{"auto"===e&&(h.value=null,d.value="å®šä½ä¸­...")},{flush:"sync"}),{locationMode:e,customLat:t,customLon:a,customCity:n,refreshInterval:o,showRainEffect:s,showThunderEffect:i,showSnowEffect:r,weatherData:c,loading:u,locationText:d,weatherInfo:v,updateWeather:async function(){if(u.value=!0,"coords"===e.value){const e=await p(t.value,a.value);return void(await f(t.value,a.value,e))}if("city"!==e.value){if("auto"===e.value&&h.value){const{lat:e,lon:t,city:a}=h.value;return void(await f(e,t,a,!0))}d.value="å®šä½ä¸­...";try{navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{const t=e.coords.latitude,a=e.coords.longitude,l=await p(t,a);await f(t,a,l,!0)},async()=>await m(),{timeout:5e3}):await m()}catch(l){v.value.text="æ›´æ–°è¶…æ—¶",u.value=!1}}else await async function(e){try{const t=await fetch("https://geocoding-api.open-meteo.com/v1/search?name=".concat(encodeURIComponent(e),"&count=1&language=zh&format=json")),a=await t.json();if(!(a.results&&a.results.length>0))throw new Error("æ‰¾ä¸åˆ°åŸŽå¸‚");{const{latitude:e,longitude:t,name:l}=a.results[0];await f(e,t,l,!0)}}catch(t){v.value.text="åŸŽå¸‚é”™è¯¯",u.value=!1}}(n.value)}}},{persist:{pick:["locationMode","customLat","customLon","customCity","refreshInterval","showRainEffect","showThunderEffect","showSnowEffect"]}}),_e={class:"relative w-full max-w-lg bg-neutral-900 border border-white/10 rounded-3xl p-8 text-white overflow-y-auto max-h-[90vh]"},Me={class:"flex items-center justify-between mb-8"},Ce={class:"space-y-8"},Te={class:"grid grid-cols-3 gap-3"},Se=["onClick"],Ee={key:0,class:"mt-4 grid grid-cols-2 gap-4"},Le={class:"space-y-2"},De={class:"space-y-2"},Ie={key:1,class:"mt-4 space-y-2"},je={class:"grid grid-cols-4 gap-2"},Ne=["onClick"],Oe={class:"grid grid-cols-3 gap-3"},Ae={class:"flex gap-4 pt-4"},Pe=["disabled"],We=a({__name:"WeatherSettingsModal",props:{show:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const a=e,n=t,d=ke(),{loading:v}=b(d),m=l({locationMode:d.locationMode,customLat:d.customLat,customLon:d.customLon,customCity:d.customCity,refreshInterval:d.refreshInterval,showRainEffect:d.showRainEffect,showThunderEffect:d.showThunderEffect,showSnowEffect:d.showSnowEffect});function w(){d.$patch({locationMode:m.value.locationMode,customLat:m.value.customLat,customLon:m.value.customLon,customCity:m.value.customCity,refreshInterval:m.value.refreshInterval,showRainEffect:m.value.showRainEffect,showThunderEffect:m.value.showThunderEffect,showSnowEffect:m.value.showSnowEffect}),n("close"),d.updateWeather()}async function x(){d.$patch({locationMode:m.value.locationMode,customLat:m.value.customLat,customLon:m.value.customLon,customCity:m.value.customCity}),await d.updateWeather()}return g(()=>a.show,e=>{e&&(m.value={locationMode:d.locationMode,customLat:d.customLat,customLon:d.customLon,customCity:d.customCity,refreshInterval:d.refreshInterval,showRainEffect:d.showRainEffect,showThunderEffect:d.showThunderEffect,showSnowEffect:d.showSnowEffect})}),(t,a)=>e.show?(s(),o("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4",onPointerdown:a[8]||(a[8]=_(()=>{},["stop"])),onPointerup:a[9]||(a[9]=_(()=>{},["stop"]))},[i("div",{class:"absolute inset-0 bg-black/80",onClick:a[0]||(a[0]=e=>t.$emit("close"))}),i("div",_e,[i("div",Me,[a[10]||(a[10]=i("h2",{class:"text-3xl font-medium tracking-wide"}," å¤©æ°”è®¾ç½® ",-1)),i("button",{class:"p-2 hover:bg-white/10 rounded-full transition-colors",onClick:a[1]||(a[1]=e=>t.$emit("close"))},[c(u(M),{class:"w-6 h-6"})])]),i("div",Ce,[i("section",null,[a[14]||(a[14]=i("h3",{class:"text-white/50 mb-4 uppercase tracking-widest text-sm font-medium"}," ä½ç½®èŽ·å–æ–¹å¼ ",-1)),i("div",Te,[(s(),o(h,null,f(["auto","coords","city"],e=>i("button",{key:e,class:p(["p-2 rounded-xl border transition-all text-center",m.value.locationMode===e?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:t=>m.value.locationMode=e},r("auto"===e?"è‡ªåŠ¨å®šä½":"coords"===e?"ç»çº¬åº¦":"åŸŽå¸‚å"),11,Se)),64))]),"coords"===m.value.locationMode?(s(),o("div",Ee,[i("div",Le,[a[11]||(a[11]=i("label",{class:"text-xs text-white/40 block ml-1"},"çº¬åº¦ (Latitude)",-1)),C(i("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>m.value.customLat=e),type:"number",step:"0.0001",class:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-white/30"},null,512),[[T,m.value.customLat,void 0,{number:!0}]])]),i("div",De,[a[12]||(a[12]=i("label",{class:"text-xs text-white/40 block ml-1"},"ç»åº¦ (Longitude)",-1)),C(i("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>m.value.customLon=e),type:"number",step:"0.0001",class:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-white/30"},null,512),[[T,m.value.customLon,void 0,{number:!0}]])])])):k("",!0),"city"===m.value.locationMode?(s(),o("div",Ie,[a[13]||(a[13]=i("label",{class:"text-xs text-white/40 block ml-1"},"åŸŽå¸‚åç§° (ä¾‹å¦‚: åŒ—äº¬) - ä»…æ”¯æŒåŸŽå¸‚",-1)),C(i("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>m.value.customCity=e),type:"text",class:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-white/30"},null,512),[[T,m.value.customCity]])])):k("",!0)]),i("section",null,[a[15]||(a[15]=i("h3",{class:"text-white/50 mb-4 uppercase tracking-widest text-sm font-medium"}," å¤©æ°”æ›´æ–°é¢‘çŽ‡ ",-1)),i("div",je,[(s(),o(h,null,f([5,10,20,30],e=>i("button",{key:e,class:p(["py-2 px-1 rounded-xl border transition-all text-center text-sm",m.value.refreshInterval===e?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:t=>m.value.refreshInterval=e},r(e)+"åˆ† ",11,Ne)),64))])]),i("section",null,[a[19]||(a[19]=i("h3",{class:"text-white/50 mb-4 uppercase tracking-widest text-sm font-medium"}," å¤©æ°”ç‰¹æ•ˆæ˜¾ç¤º ",-1)),i("div",Oe,[i("div",{class:p(["flex items-center justify-center p-2 rounded-xl cursor-pointer transition-all duration-300 text-center border",m.value.showRainEffect?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:a[5]||(a[5]=e=>m.value.showRainEffect=!m.value.showRainEffect)},[...a[16]||(a[16]=[i("span",{class:"text-base"},"ä¸‹é›¨",-1)])],2),i("div",{class:p(["flex items-center justify-center p-2 rounded-xl cursor-pointer transition-all duration-300 text-center border",m.value.showThunderEffect?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:a[6]||(a[6]=e=>m.value.showThunderEffect=!m.value.showThunderEffect)},[...a[17]||(a[17]=[i("span",{class:"text-base"},"æ‰“é›·",-1)])],2),i("div",{class:p(["flex items-center justify-center p-2 rounded-xl cursor-pointer transition-all duration-300 text-center border",m.value.showSnowEffect?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:a[7]||(a[7]=e=>m.value.showSnowEffect=!m.value.showSnowEffect)},[...a[18]||(a[18]=[i("span",{class:"text-base"},"ä¸‹é›ª",-1)])],2)])]),i("div",Ae,[i("button",{class:"flex items-center justify-center gap-2 p-4 px-6 rounded-2xl bg-white/10 hover:bg-white/20 transition-all font-medium",disabled:u(v),onClick:x},[c(u(E),{class:p(["w-5 h-5",{"animate-spin":u(v)}])},null,8,["class"]),a[20]||(a[20]=S(" ç«‹å³åˆ·æ–°å¤©æ°” ",-1))],8,Pe),i("button",{class:"flex-1 flex items-center justify-center gap-2 p-4 rounded-2xl bg-white text-black font-bold hover:bg-opacity-90 transition-all",onClick:w},[c(u(L),{class:"w-5 h-5"}),a[21]||(a[21]=S(" ä¿å­˜å¹¶å…³é—­ ",-1))])])])])],32)):k("",!0)}}),Re={class:"flex items-center justify-center md:justify-start gap-0"},Fe={id:"weather-icon",class:"w-28 h-28 drop-shadow-xl"},Je=["src","alt"],ze={id:"weather-text",class:"text-4xl font-semibold tracking-wide"},Ue={id:"location-text",class:"text-md text-white/60 uppercase tracking-widest mt-1 whitespace-nowrap"},Ve={class:"text-blue-400 text-xl tabular-nums"},He={class:"flex items-center justify-center px-4 gap-6"},Be={class:"flex items-end"},Xe={id:"temp-val",class:"text-8xl font-extralight mr-1"},Ye={class:"flex flex-col items-end justify-between gap-2"},$e={id:"temp-max",class:"text-3xl font-medium text-red-200"},Ke={id:"temp-min",class:"text-3xl font-medium text-blue-200"},qe={class:"flex flex-col justify-center items-center md:items-end gap-3 text-white text-3xl tabular-nums"},Ge={class:"flex items-center gap-3"},Qe={id:"humidity-val"},Ze={class:"flex items-center gap-3"},et={id:"apparent-temp-val"},tt={id:"uv-val"},at=me(a({__name:"Weather",setup(e){const t=ke(),{weatherData:a,loading:n,locationText:d,weatherInfo:v,refreshInterval:f}=b(t),x=l(!1);let y;function k(){y&&clearInterval(y),y=window.setInterval(t.updateWeather,60*f.value*1e3)}return g(f,()=>{k()}),m(()=>{t.updateWeather(),k()}),w(()=>{clearInterval(y)}),(e,t)=>(s(),o(h,null,[i("div",{id:"weather-container",class:p(["weather-clickable grid grid-cols-1 md:grid-cols-3 gap-3 w-full pt-10 transition-opacity duration-700",{"opacity-30":u(n),"opacity-100":!u(n)}]),onClick:t[0]||(t[0]=e=>x.value=!0)},[i("div",Re,[i("div",Fe,[i("img",{src:u(v).icon,alt:u(v).text,class:"w-full h-full object-contain"},null,8,Je)]),i("div",null,[i("p",ze,r(u(v).text),1),i("p",Ue,[S(r(u(d))+" Â· é™é›¨ ",1),i("span",Ve,r(u(a)?u(a).hourly.precipitation_probability[u(a).current_hour_index]:"--")+"%",1)])])]),i("div",He,[i("div",Be,[i("div",Xe,r(u(a)?Math.round(u(a).current.temperature_2m):"--"),1),t[2]||(t[2]=i("div",{class:"text-3xl font-light opacity-70 mb-12"}," Â°C ",-1))]),i("div",Ye,[i("span",$e,r(u(a)?Math.round(Math.max(...u(a).hourly.temperature_2m)):"--")+"Â° ",1),i("span",Ke,r(u(a)?Math.round(Math.min(...u(a).hourly.temperature_2m)):"--")+"Â° ",1)])]),i("div",qe,[i("div",Ge,[i("span",Qe,r(u(a)?u(a).current.relative_humidity_2m:"--")+"% ",1),c(u(D),{class:"w-8 h-8 text-blue-500/60"})]),i("div",Ze,[i("span",et,r(u(a)?Math.round(u(a).current.apparent_temperature):"--")+"Â°C ",1),c(u(I),{class:"w-8 h-8 text-orange-500/60"}),i("span",tt,r(u(a)?Math.round(u(a).hourly.uv_index[u(a).current_hour_index]):"--"),1),c(u(j),{class:"w-8 h-8 text-yellow-500/60"})])])],2),c(We,{show:x.value,onClose:t[1]||(t[1]=e=>x.value=!1)},null,8,["show"])],64))}}),[["__scopeId","data-v-73a3a1ef"]]),lt={class:"glass-panel h-full p-4 md:p-8 flex flex-col items-center justify-evenly text-white w-full"},nt={class:"flex flex-col md:flex-row items-center md:items-start gap-6 w-full justify-center"},ot={class:"flex items-center gap-4"},st={class:"date-day-big text-glow"},it={class:"flex flex-col mt-2"},rt={class:"text-5xl tracking-[0.2em] opacity-90 uppercase"},ct={class:"text-4xl tracking-[0.2em] font-light opacity-70 mt-1"},ut={class:"flex flex-col items-center md:items-start mt-5"},dt={class:"text-5xl font-medium text-white/90 tracking-wider"},vt={class:"text-4xl tracking-[0.2em] font-light opacity-70 mt-2"},ht={key:0,class:"clock-separator second-separator"},ft=me(a({__name:"ClockWeather",setup(e){const{h1:t,h2:a,m1:n,m2:d,s1:v,s2:f,lunar:g,now:x,showSeconds:y}=function(){const e=l(new Date),t=l(0),a=l(0),n=l(0),o=l(0),s=l(0),i=l(0),r=l(ne(new Date)),c=l(!1);let u;const d=()=>{const l=new Date;e.value=l;const c=String(l.getHours()).padStart(2,"0"),u=String(l.getMinutes()).padStart(2,"0"),d=String(l.getSeconds()).padStart(2,"0");t.value=Number.parseInt(c[0]),a.value=Number.parseInt(c[1]),n.value=Number.parseInt(u[0]),o.value=Number.parseInt(u[1]),s.value=Number.parseInt(d[0]),i.value=Number.parseInt(d[1]),0===l.getHours()&&0===l.getMinutes()&&0===l.getSeconds()&&(r.value=ne(l))};return m(()=>{d(),u=window.setInterval(d,1e3),r.value=ne(new Date)}),w(()=>{clearInterval(u)}),{now:e,h1:t,h2:a,m1:n,m2:o,s1:s,s2:i,lunar:r,showSeconds:c}}();let b=0,_=0;function M(e){b="touches"in e?e.touches[0].clientX:e.clientX,_="touches"in e?e.touches[0].clientY:e.clientY}function C(e){const t="changedTouches"in e?e.changedTouches[0].clientX:e.clientX,a="changedTouches"in e?e.changedTouches[0].clientY:e.clientY,l=Math.abs(t-b),n=Math.abs(a-_);l<10&&n<10&&(y.value=!y.value)}return(e,l)=>(s(),o("div",lt,[i("div",nt,[i("div",ot,[i("div",st,r(u(x).getDate()),1),i("div",it,[i("span",rt,r(u(x).toLocaleDateString("zh-CN",{weekday:"long"})),1),i("span",ct,r(u(x).getFullYear())+"å¹´"+r(u(x).getMonth()+1)+"æœˆ ",1)])]),l[0]||(l[0]=i("div",{class:"hidden md:block w-px h-16 mx-16 self-center"},null,-1)),i("div",ut,[i("span",dt,r(u(g).fullDate),1),i("span",vt,r(u(g).year)+r(u(g).month),1)])]),i("div",{class:p(["clock-display text-glow tabular-nums mb-4 cursor-pointer transition-all duration-500",{"with-seconds":u(y)}]),onPointerdown:M,onPointerup:C},[c(ye,{value:u(t),trigger:u(y)?u(x).getTime():Math.floor(u(x).getTime()/6e4)},null,8,["value","trigger"]),c(ye,{value:u(a),trigger:u(y)?u(x).getTime():Math.floor(u(x).getTime()/6e4)},null,8,["value","trigger"]),l[1]||(l[1]=i("div",{class:"clock-separator"}," : ",-1)),c(ye,{value:u(n),trigger:u(y)?u(x).getTime():Math.floor(u(x).getTime()/6e4)},null,8,["value","trigger"]),c(ye,{value:u(d),trigger:u(y)?u(x).getTime():Math.floor(u(x).getTime()/6e4)},null,8,["value","trigger"]),u(y)?(s(),o("div",ht," : ")):k("",!0),u(y)?(s(),o(h,{key:1},[c(ye,{class:"second-digit",value:u(v),trigger:u(x).getTime()},null,8,["value","trigger"]),c(ye,{class:"second-digit",value:u(f),trigger:u(x).getTime()},null,8,["value","trigger"])],64)):k("",!0)],34),c(at)]))}}),[["__scopeId","data-v-3c7ffed4"]]),pt=y("config",()=>{const e=localStorage.getItem("ha_config"),t=l(e?JSON.parse(e):{url:"",token:"",entities:[]});return e&&localStorage.removeItem("ha_config"),{haConfig:t}},{persist:!0}),mt={class:"bg-neutral-900 p-6 md:p-8 rounded-3xl border border-white/10 w-full max-w-2xl text-white max-h-[90vh] flex flex-col relative"},wt={class:"flex items-center justify-between mb-6 flex-shrink-0"},gt={class:"flex items-center gap-2"},xt={class:"space-y-6 overflow-y-auto pr-2 flex-1"},yt={key:0,class:"space-y-6"},bt={class:"space-y-4"},kt={class:"space-y-3"},_t={class:"flex flex-col gap-1"},Mt=["onClick"],Ct=["onClick"],Tt=["onUpdate:modelValue"],St=["onUpdate:modelValue","placeholder"],Et=["onClick"],Lt={key:1,class:"space-y-3"},Dt=a({__name:"SettingsModal",props:{show:{type:Boolean},entitiesStates:{}},emits:["close","saved"],setup(e,{emit:t}){const a=e,n=t,r=pt(),d=l(JSON.parse(JSON.stringify(r.haConfig))),v=l(!1),p=l("");function m(){d.value.entities.push({id:"",name:""})}function w(e,t){const a=e+t;if(a>=0&&a<d.value.entities.length){const t=d.value.entities[e];d.value.entities[e]=d.value.entities[a],d.value.entities[a]=t}}function x(){if(v.value)try{const e=JSON.parse(p.value);if(!e||"object"!=typeof e)throw new Error("Must be an object");d.value.url=e.url||"",d.value.token=e.token||"",d.value.entities=Array.isArray(e.entities)?e.entities:[]}catch(e){return void alert("JSON æ ¼å¼é”™è¯¯ï¼Œä¿å­˜å¤±è´¥")}r.haConfig=JSON.parse(JSON.stringify(d.value)),n("saved"),n("close")}return g(()=>a.show,e=>{e&&(d.value=JSON.parse(JSON.stringify(r.haConfig)))}),g(v,e=>{if(e)p.value=JSON.stringify({url:d.value.url,token:d.value.token,entities:d.value.entities},null,2);else try{const e=JSON.parse(p.value);e&&"object"==typeof e&&(void 0!==e.url&&(d.value.url=e.url),void 0!==e.token&&(d.value.token=e.token),Array.isArray(e.entities)&&(d.value.entities=e.entities))}catch(t){alert("JSON æ ¼å¼é”™è¯¯ï¼Œè¯·æ£€æŸ¥åŽå†åˆ‡æ¢æ¨¡å¼"),setTimeout(()=>{v.value=!0},0)}}),(t,l)=>e.show?(s(),o("div",{key:0,id:"settings-modal",class:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 md:p-6 z-[1000]",onPointerdown:l[6]||(l[6]=_(()=>{},["stop"])),onPointerup:l[7]||(l[7]=_(()=>{},["stop"]))},[i("div",{class:"absolute top-0 left-0 right-0 bottom-0 bg-black/80",onClick:l[0]||(l[0]=e=>n("close"))}),i("div",mt,[i("div",wt,[l[10]||(l[10]=i("h3",{class:"text-2xl font-bold"}," Home Assistant é…ç½® ",-1)),i("div",gt,[i("button",{class:"text-xs flex items-center gap-1.5 opacity-50 hover:opacity-100 transition-all px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg border border-white/5",onClick:l[1]||(l[1]=e=>v.value=!v.value)},[v.value?(s(),o(h,{key:1},[c(u(O),{class:"w-3.5 h-3.5"}),l[9]||(l[9]=S(" åˆ—è¡¨æ¨¡å¼ ",-1))],64)):(s(),o(h,{key:0},[c(u(N),{class:"w-3.5 h-3.5"}),l[8]||(l[8]=S(" JSON æ¨¡å¼ ",-1))],64))]),i("button",{class:"opacity-50 hover:opacity-100 p-2",onClick:l[2]||(l[2]=e=>n("close"))},[c(u(M),{class:"w-6 h-6"})])])]),i("div",xt,[v.value?(s(),o("div",Lt,[C(i("textarea",{"onUpdate:modelValue":l[5]||(l[5]=e=>p.value=e),rows:"18",class:"w-full bg-white/5 border border-white/10 text-white font-mono text-sm rounded-xl px-4 py-3 outline-none focus:border-white/30",placeholder:'{"url": "http://...", "token": "...", "entities": [{"id": "light.living_room", "name": "å®¢åŽ…ç¯"}]}'},null,512),[[T,p.value]]),l[15]||(l[15]=i("div",{class:"flex justify-between items-center text-[10px] opacity-30 px-1"},[i("span",null,"æ”¯æŒåœ°å€ã€ä»¤ç‰Œã€è®¾å¤‡åˆ—è¡¨å…¨é‡å¯¼å…¥å¯¼å‡º"),i("span",null,'æ ¼å¼: { "url": "...", "token": "...", "entities": [...] }')],-1)),l[16]||(l[16]=i("div",{class:"mt-4 p-4 bg-orange-500/10 border border-orange-500/20 rounded-xl"},[i("p",{class:"text-xs text-orange-200/60 leading-relaxed"},[i("strong",null,"ðŸ’¡ è·¨åŸŸæç¤ºï¼š"),S(" å¦‚æžœæŽ¥å£æ— æ³•åŠ è½½ï¼Œè¯·ç¡®ä¿åœ¨ Home Assistant çš„ "),i("code",null,"configuration.yaml"),S(" ä¸­é…ç½®äº† "),i("code",null,"cors_allowed_origins"),S("ï¼ŒåŒ…å«å½“å‰çœ‹æ¿çš„è®¿é—®åŸŸåæˆ– IPã€‚ ")])],-1))])):(s(),o("div",yt,[i("div",null,[l[11]||(l[11]=i("label",{class:"block text-sm opacity-50 mb-2 uppercase tracking-widest"},"HA åœ°å€",-1)),C(i("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>d.value.url=e),type:"text",placeholder:"http://192.168.1.xxx:8123",class:"w-full bg-white/5 border border-white/10 text-white rounded-xl px-4 py-3 outline-none focus:border-white/30"},null,512),[[T,d.value.url]])]),i("div",null,[l[12]||(l[12]=i("label",{class:"block text-sm opacity-50 mb-2 uppercase tracking-widest"},"é•¿æœŸè®¿é—®ä»¤ç‰Œ",-1)),C(i("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>d.value.token=e),type:"password",placeholder:"è¾“å…¥ä»¤ç‰Œ",class:"w-full bg-white/5 border border-white/10 text-white rounded-xl px-4 py-3 outline-none focus:border-white/30"},null,512),[[T,d.value.token]])]),i("div",bt,[l[14]||(l[14]=i("label",{class:"block text-sm opacity-50 uppercase tracking-widest"},"è®¾å¤‡åˆ—è¡¨",-1)),i("div",kt,[(s(!0),o(h,null,f(d.value.entities,(e,t)=>{var l,n,r;return s(),o("div",{key:t,class:"flex gap-2"},[i("div",_t,[i("button",{class:"p-1 opacity-30 hover:opacity-100 transition-opacity",onClick:e=>w(t,-1)},[c(u(P),{class:"w-4 h-4"})],8,Mt),i("button",{class:"p-1 opacity-30 hover:opacity-100 transition-opacity",onClick:e=>w(t,1)},[c(u(W),{class:"w-4 h-4"})],8,Ct)]),C(i("input",{"onUpdate:modelValue":t=>e.id=t,type:"text",class:"flex-1 bg-white/5 border border-white/10 text-white rounded-xl px-4 py-2 outline-none focus:border-white/30",placeholder:"å®žä½“ ID"},null,8,Tt),[[T,e.id]]),C(i("input",{"onUpdate:modelValue":t=>e.name=t,type:"text",class:"w-24 md:w-32 bg-white/5 border border-white/10 text-white rounded-xl px-4 py-2 outline-none focus:border-white/30",placeholder:(null==(r=null==(n=null==(l=a.entitiesStates)?void 0:l[e.id])?void 0:n.attributes)?void 0:r.friendly_name)||"å¤‡æ³¨å"},null,8,St),[[T,e.name]]),i("button",{class:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",onClick:e=>function(e){d.value.entities.splice(e,1)}(t)},[c(u(R),{class:"w-5 h-5"})],8,Et)])}),128)),i("button",{class:"flex items-center gap-2 text-sm opacity-70 hover:opacity-100 transition-all mt-2 bg-white/5 px-4 py-2 rounded-xl w-full justify-center border border-dashed border-white/10 hover:border-white/20",onClick:m},[c(u(A),{class:"w-5 h-5"}),l[13]||(l[13]=S(" æ·»åŠ è®¾å¤‡ ",-1))])])])]))]),i("div",{class:"pt-6 mt-2 border-t border-white/10 flex-shrink-0"},[i("button",{class:"w-full py-4 bg-white text-black font-bold rounded-2xl hover:bg-opacity-90 transition-all shadow-xl",onClick:x}," ä¿å­˜å¹¶åº”ç”¨ ")])])],32)):k("",!0)}}),It={class:"glass-panel p-8 md:p-14 flex flex-col items-center text-white h-full justify-start overflow-y-auto w-full"},jt={class:"flex items-center justify-between w-full mb-10"},Nt={class:"flex items-baseline gap-6"},Ot={key:0,class:"flex items-center gap-6 opacity-60"},At={key:0,class:"flex items-center gap-2"},Pt={class:"text-2xl font-medium tabular-nums"},Wt={key:1,class:"flex items-center gap-2"},Rt={class:"text-2xl font-medium tabular-nums"},Ft={class:"flex gap-4"},Jt={key:0,id:"ha-entities",class:"grid grid-cols-2 md:grid-cols-3 gap-6 w-full"},zt=["onClick"],Ut={class:"flex items-center justify-between w-full"},Vt={key:0,class:"flex gap-4 text-sm font-medium opacity-80"},Ht={key:0,class:"flex items-center gap-1.5"},Bt={class:"text-base"},Xt={key:1,class:"flex items-center gap-1.5"},Yt={class:"text-base"},$t={class:"flex flex-col overflow-hidden w-full"},Kt={class:"font-bold text-lg truncate w-full"},qt={class:"text-sm opacity-50 uppercase tracking-widest"},Gt={key:1,class:"col-span-full text-center py-20 opacity-50"},Qt=me(a({__name:"SmartHome",emits:["openSettings"],setup(e,{expose:t,emit:a}){const d=a,v=pt(),{haConfig:m}=b(v),w=l({}),g=l({}),x=l(!1),y=n(()=>{const e=m.value.entities.find(e=>e.id.startsWith("climate."));if(!e)return null;const t=w.value[e.id];if(!t||!t.attributes)return null;const{current_temperature:a,current_humidity:l}=t.attributes;return void 0===a&&void 0===l?null:{temp:a,humi:l}});function _(e){var t;const a=null==(t=w.value[e])?void 0:t.state;return e.startsWith("cover.")?"open"===a:e.startsWith("climate.")?"off"!==a&&"unavailable"!==a:"on"===a}async function M(e){if(m.value.url&&m.value.token)try{const t=await fetch("".concat(m.value.url,"/api/states/").concat(e),{headers:{Authorization:"Bearer ".concat(m.value.token)}}),a=await t.json();w.value[e]=a}catch(t){console.error("HA Fetch Error:",t)}}async function C(){if(x.value=!0,!m.value.url||!m.value.token)return void(x.value=!1);const e=m.value.entities.map(e=>M(e.id));await Promise.all(e),setTimeout(()=>{x.value=!1},500)}return t({updateAllStates:C,entitiesStates:w}),(e,t)=>(s(),o("div",It,[i("div",jt,[i("div",Nt,[t[1]||(t[1]=i("h2",{class:"text-4xl font-bold tracking-widest text-nowrap"}," æ™ºèƒ½æŽ§åˆ¶ ",-1)),y.value?(s(),o("div",Ot,[void 0!==y.value.temp?(s(),o("div",At,[c(u(F),{class:"w-5 h-5 text-orange-400"}),i("span",Pt,r(y.value.temp)+"Â°",1)])):k("",!0),void 0!==y.value.humi?(s(),o("div",Wt,[c(u(D),{class:"w-5 h-5 text-blue-400"}),i("span",Rt,r(y.value.humi)+"%",1)])):k("",!0)])):k("",!0)]),i("div",Ft,[i("button",{class:p(["p-4 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all",{"opacity-50 pointer-events-none":x.value}]),onClick:C},[c(u(J),{class:p(["w-6 h-6",{"animate-spin":x.value}])},null,8,["class"])],2),i("button",{class:"p-4 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all",onClick:t[0]||(t[0]=e=>d("openSettings"))},[c(u(z),{class:"w-6 h-6"})])])]),u(m).url&&u(m).token?(s(),o("div",Jt,[(s(!0),o(h,null,f(u(m).entities,e=>{var t,a,l,n,d;return s(),o("div",{key:e.id,class:p(["ha-card",{on:_(e.id),"opacity-50 pointer-events-none":g.value[e.id]}]),onClick:t=>async function(e){const t=e.split(".")[0],a=_(e);let l="";l="cover"===t?a?"close_cover":"open_cover":a?"turn_off":"turn_on",g.value[e]=!0;try{await fetch("".concat(m.value.url,"/api/services/").concat(t,"/").concat(l),{method:"POST",headers:{Authorization:"Bearer ".concat(m.value.token),"Content-Type":"application/json"},body:JSON.stringify({entity_id:e})}),setTimeout(()=>M(e).then(()=>{g.value[e]=!1}),500)}catch(n){alert("æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œå’Œé…ç½®"),g.value[e]=!1}}(e.id)},[i("div",Ut,[i("div",{class:p(["w-12 h-12 flex items-center justify-center rounded-full transition-colors",_(e.id)?"bg-white text-black":"bg-white/10 text-white"])},[g.value[e.id]?(s(),U(u(V),{key:0,class:"w-6 h-6 animate-spin"})):(s(),U(H((n=e.id.split(".")[0],d=_(e.id),"light"===n?d?B:X:"switch"===n?Y:"fan"===n?$:"media_player"===n?K:"cover"===n?q:"climate"===n?G:j)),{key:1,class:"w-6 h-6"}))],2),e.id.startsWith("climate.")&&(null==(t=w.value[e.id])?void 0:t.attributes)?(s(),o("div",Vt,[void 0!==w.value[e.id].attributes.current_temperature?(s(),o("div",Ht,[c(u(F),{class:"w-4 h-4 text-orange-400"}),i("span",Bt,r(w.value[e.id].attributes.current_temperature)+"Â°",1)])):k("",!0),void 0!==w.value[e.id].attributes.current_humidity?(s(),o("div",Xt,[c(u(D),{class:"w-4 h-4 text-blue-400"}),i("span",Yt,r(w.value[e.id].attributes.current_humidity)+"%",1)])):k("",!0)])):k("",!0)]),i("div",$t,[i("span",Kt,r(e.name||w.value[e.id]&&w.value[e.id].attributes&&w.value[e.id].attributes.friendly_name||e.id),1),i("span",qt,[e.id.startsWith("climate.")&&_(e.id)?(s(),o(h,{key:0},[S(r((null==(l=null==(a=w.value[e.id])?void 0:a.attributes)?void 0:l.temperature)?"".concat(w.value[e.id].attributes.temperature,"Â°C"):"å·²å¼€å¯"),1)],64)):(s(),o(h,{key:1},[S(r(_(e.id)?"å·²å¼€å¯":"å·²å…³é—­"),1)],64))])])],10,zt)}),128))])):(s(),o("div",Gt,[...t[2]||(t[2]=[i("p",null,"è¯·ç‚¹å‡»å³ä¸Šè§’è®¾ç½® Home Assistant åœ°å€å’Œä»¤ç‰Œ",-1)])]))]))}}),[["__scopeId","data-v-aae45e16"]]),Zt={class:"weather-effects-container pointer-events-none fixed inset-0 z-0 overflow-hidden"},ea=me(a({__name:"WeatherEffects",setup(e){const t=ke(),{weatherData:a,showRainEffect:r,showThunderEffect:c,showSnowEffect:u}=b(t),d=n(()=>{var e,t,l;return null!=(l=null==(t=null==(e=a.value)?void 0:e.current)?void 0:t.weather_code)?l:-1}),v=n(()=>{if(!r.value)return!1;const e=d.value;return e>=51&&e<=67||e>=80&&e<=82||e>=95&&e<=99}),h=n(()=>{if(!u.value)return!1;const e=d.value;return e>=71&&e<=77||85===e||86===e}),f=n(()=>{if(!c.value)return!1;const e=d.value;return 95===e||96===e||99===e}),x=n(()=>{const e=d.value;return 65===e||82===e||99===e?150:63===e||81===e||96===e?100:e>=51&&e<=55?40:80}),y=n(()=>{const e=d.value;return 75===e||86===e?100:73===e?60:30}),_=l(!1),M=l(!1);let C=[];const T=l(null);let S=null,E=null,L=[],D=[];function I(){if(!T.value)return;const e=T.value;if(e.width=window.innerWidth,e.height=window.innerHeight,v.value){const t=x.value,a=t<=40?5:t<=100?7:10;L=[];for(let l=0;l<t;l++)L.push({x:Math.random()*e.width,y:Math.random()*e.height,l:20+15*Math.random(),v:a+Math.random()*a})}if(h.value){const t=y.value;D=[];for(let a=0;a<t;a++)D.push({x:Math.random()*e.width,y:Math.random()*e.height,r:2+3*Math.random(),v:1+2*Math.random(),w:.5+1*Math.random(),o:Math.random()*Math.PI*2})}}function j(){if(!T.value)return;const e=T.value,t=e.getContext("2d");if(t){if(t.clearRect(0,0,e.width,e.height),f.value&&M.value&&function(e){M.value&&0!==C.length&&(e.save(),e.shadowBlur=15,e.shadowColor="rgba(255, 255, 255, 1)",e.strokeStyle="rgba(255, 255, 255, 0.8)",e.lineWidth=4,e.lineCap="round",e.lineJoin="round",C.forEach(t=>{e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let a=1;a<t.length;a++)e.lineTo(t[a].x,t[a].y);e.stroke()}),e.shadowBlur=0,e.strokeStyle="#ffffff",e.lineWidth=2,C.forEach(t=>{e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let a=1;a<t.length;a++)e.lineTo(t[a].x,t[a].y);e.stroke()}),e.restore())}(t),v.value){t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth=1.5,t.lineCap="round";for(let a=0;a<L.length;a++){const l=L[a];t.beginPath(),t.moveTo(l.x,l.y);const n=.15*l.v;t.lineTo(l.x+2*n,l.y+l.l),t.stroke(),l.y+=l.v,l.x+=n,l.y>e.height&&(l.y=-l.l,l.x=Math.random()*e.width)}}if(h.value){t.fillStyle="rgba(255, 255, 255, 0.8)";for(let a=0;a<D.length;a++){const l=D[a];t.beginPath(),t.arc(l.x,l.y,l.r,0,2*Math.PI),t.fill(),l.y+=l.v,l.x+=Math.sin(l.o+l.y/50)*l.w,l.y>e.height&&(l.y=-l.r,l.x=Math.random()*e.width)}}S=requestAnimationFrame(j)}}function N(){if(!f.value)return;!function(){const e=100+200*Math.random(),t=T.value?.6*T.value.height:400,a=[];let l=Math.random()*(window.innerWidth-e)+e/2,n=50*Math.random();const o=5+Math.floor(5*Math.random()),s=t/o;a.push({x:l,y:n});const i=[];for(let r=1;r<=o;r++)if(l+=60*(Math.random()-.5),n+=s,a.push({x:l,y:n}),Math.random()>.7&&r<o){const e=[];e.push({x:l,y:n});const t=l+80*(Math.random()-.5),a=n+.5*s;e.push({x:t,y:a}),i.push(e)}i.push(a),C=i}(),M.value=!0,_.value=!0,setTimeout(()=>{_.value=!1,M.value=!1},50),setTimeout(()=>{_.value=!0,M.value=!0},100),setTimeout(()=>{_.value=!1,M.value=!1},150),setTimeout(()=>{_.value=!0,M.value=!0},200),setTimeout(()=>{_.value=!1,M.value=!1},400);const e=3e3+7e3*Math.random();E=window.setTimeout(N,e)}return g([v,x,h,y],()=>{I()}),g(f,e=>{e?N():E&&(clearTimeout(E),E=null,_.value=!1)},{immediate:!0}),m(()=>{I(),j(),window.addEventListener("resize",I)}),w(()=>{E&&clearTimeout(E),S&&cancelAnimationFrame(S),window.removeEventListener("resize",I)}),(e,t)=>(s(),o("div",Zt,[f.value?(s(),o("div",{key:0,class:p(["flash-overlay absolute inset-0 bg-white opacity-0 transition-opacity duration-75",{"opacity-10":_.value}])},null,2)):k("",!0),i("canvas",{ref_key:"canvasRef",ref:T,class:"absolute inset-0 w-full h-full"},null,512)]))}}),[["__scopeId","data-v-5cc21d15"]]),ta=y("todos",()=>{const e=l([]),t="".concat(location.protocol,"//").concat(location.hostname,":3001"),a=Q(t);return a.on("initial-tasks",t=>{e.value=t||[]}),a.on("task-created",t=>{e.value=[t,...e.value.filter(e=>e.id!==t.id)]}),a.on("task-updated",t=>{const a=e.value.findIndex(e=>e.id===t.id);a>=0&&(e.value[a]=t)}),a.on("task-deleted",t=>{e.value=e.value.filter(e=>e.id!==t)}),Z(()=>{a.disconnect()}),{todos:e,addTask:function(e,t,l,n){const o={id:Date.now().toString(),name:e,description:t,deadline:l,tags:n,completed:!1,createdAt:Date.now()};a.emit("new-task",o)},toggleTask:function(t){const l=e.value.find(e=>e.id===t);if(!l)return;const n={...l,completed:!l.completed};a.emit("update-task",n)},deleteTask:function(e){a.emit("delete-task",e)}}}),aa={class:"w-full h-full p-6 bg-black text-white flex flex-col"},la={class:"overflow-auto flex-1"},na={key:0,class:"text-center text-gray-400 py-12"},oa={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},sa={class:"absolute top-4 right-4 flex gap-2"},ia=["checked","onChange"],ra=["onClick"],ca={class:"flex gap-2 flex-wrap mb-3"},ua=me(a({__name:"TodoView",setup(e){const t=ta(),{todos:a}=b(t);function l(e){const t=function(e){if(!e)return null;const t=new Date(e),a=new Date,l=t.getTime()-a.getTime();return Math.ceil(l/864e5)}(e);return null===t?"":t<0?"bg-red-600 text-white":0===t?"bg-orange-600 text-white":t<=3?"bg-yellow-600 text-white":"bg-emerald-600 text-white"}function c(e){if(!e)return"";return new Date(e).toLocaleDateString("zh-CN",{month:"short",day:"numeric"})}const d=n(()=>[...a.value.filter(e=>!e.completed),...a.value.filter(e=>e.completed)]);return(e,n)=>(s(),o("div",aa,[n[1]||(n[1]=i("h2",{class:"text-4xl font-bold mb-6"},"å¾…åŠž",-1)),i("div",la,[0===u(a).length?(s(),o("div",na,[...n[0]||(n[0]=[i("div",{class:"text-2xl mb-2"},"ðŸ“‹",-1),i("div",null,"æš‚æ— ä»»åŠ¡",-1)])])):(s(),o("div",oa,[(s(!0),o(h,null,f(d.value,e=>(s(),o("div",{key:e.id,class:p(["relative rounded-lg p-5 border-2 transition-all duration-300 group",e.completed?"bg-gray-700 border-gray-500 opacity-50 hover:opacity-75":"bg-gradient-to-br from-blue-900 to-blue-800 border-blue-500 hover:shadow-lg hover:shadow-blue-500/20"])},[i("div",sa,[i("input",{type:"checkbox",checked:e.completed,onChange:()=>{return a=e.id,void t.toggleTask(a);var a},class:"w-5 h-5 cursor-pointer",title:"æ ‡è®°å®Œæˆ"},null,40,ia),i("button",{onClick:a=>{return l=e.id,void(confirm("ç¡®è®¤åˆ é™¤æ­¤ä»»åŠ¡ï¼Ÿ")&&t.deleteTask(l));var l},class:"text-red-400 hover:text-red-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"åˆ é™¤ä»»åŠ¡"}," ðŸ—‘ï¸ ",8,ra)]),i("div",{class:p(["text-xl font-bold mb-3 pr-16 break-words",{"line-through text-gray-400":e.completed}])},r(e.name),3),e.description?(s(),o("div",{key:0,class:p(["text-sm mb-3 line-clamp-2",e.completed?"text-gray-400":"text-gray-200"])},r(e.description),3)):k("",!0),i("div",ca,[e.deadline?(s(),o("div",{key:0,class:p(["px-3 py-1 rounded-full text-xs font-semibold",l(e.deadline)])}," ðŸ“… "+r(c(e.deadline)),3)):k("",!0),(s(!0),o(h,null,f(e.tags,t=>(s(),o("div",{key:t,class:p(["px-3 py-1 rounded-full text-xs font-medium",e.completed?"bg-gray-600 text-gray-300":"bg-purple-600/40 text-purple-200"])},r(t),3))),128))]),i("div",{class:p(["text-xs mt-3",e.completed?"text-gray-500":"text-gray-400"])}," åˆ›å»ºï¼š"+r(new Date(e.createdAt).toLocaleString()),3)],2))),128))]))]),n[2]||(n[2]=i("div",{class:"mt-4 text-sm text-gray-400 border-t border-gray-700 pt-4"},[S(" ðŸ’¡ é€šè¿‡æ‰‹æœº/PC è®¿é—® "),i("span",{class:"text-sky-400"},"?mode=edit"),S(" å¯æ´¾å‘æ–°ä»»åŠ¡ ")],-1))]))}}),[["__scopeId","data-v-67b7d783"]]),da={class:"w-screen h-screen bg-neutral-900 text-white flex flex-col overflow-hidden"},va={class:"p-6 border-b border-white/10 flex-shrink-0"},ha={class:"space-y-4"},fa={class:"flex gap-2 mb-2"},pa={class:"flex flex-wrap gap-2"},ma=["onClick"],wa={class:"flex-1 overflow-auto p-6"},ga={key:0,class:"text-gray-400 text-center py-8"},xa={class:"space-y-3"},ya={class:"flex items-start gap-3 mb-2"},ba=["checked","onChange"],ka={class:"flex-1"},_a={class:"flex gap-2 mt-2 flex-wrap"},Ma={key:0,class:"text-xs bg-orange-600/30 text-orange-200 px-2 py-1 rounded"},Ca=["onClick"],Ta=me(a({__name:"TodoEdit",setup(e){const t=ta(),{todos:a}=b(t),n=l(""),c=l(""),d=l(""),v=l(""),m=l([]);function w(){const e=n.value.trim();if(!e)return;t.addTask(e,c.value,d.value||void 0,m.value.length>0?m.value:void 0),n.value="",c.value="",d.value="",m.value=[],v.value="";const a=document.getElementById("task-name");null==a||a.focus()}function g(){const e=v.value.trim();e&&(m.value.push(e),v.value="")}return(e,l)=>(s(),o("div",da,[i("div",va,[l[9]||(l[9]=i("h1",{class:"text-2xl mb-6"},"æ´¾å‘ä»»åŠ¡",-1)),i("div",ha,[i("div",null,[l[4]||(l[4]=i("label",{class:"block text-sm mb-2"},"ä»»åŠ¡åç§° *",-1)),C(i("input",{id:"task-name","onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),onKeyup:ee(w,["enter"]),placeholder:"è¾“å…¥ä»»åŠ¡åç§°",class:"w-full p-3 rounded bg-white/5 outline-none border border-white/10 focus:border-sky-500"},null,544),[[T,n.value]])]),i("div",null,[l[5]||(l[5]=i("label",{class:"block text-sm mb-2"},"ç®€ä»‹",-1)),C(i("textarea",{"onUpdate:modelValue":l[1]||(l[1]=e=>c.value=e),placeholder:"ä»»åŠ¡æè¿°ï¼ˆå¯é€‰ï¼‰",rows:"2",class:"w-full p-3 rounded bg-white/5 outline-none border border-white/10 focus:border-sky-500 resize-none"},null,512),[[T,c.value]])]),i("div",null,[l[6]||(l[6]=i("label",{class:"block text-sm mb-2"},"æˆªæ­¢æ—¥æœŸ",-1)),C(i("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>d.value=e),type:"date",class:"w-full p-3 rounded bg-white/5 outline-none border border-white/10 focus:border-sky-500"},null,512),[[T,d.value]])]),i("div",null,[l[7]||(l[7]=i("label",{class:"block text-sm mb-2"},"æ ‡ç­¾",-1)),i("div",fa,[C(i("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>v.value=e),onKeyup:ee(g,["enter"]),placeholder:"è¾“å…¥æ ‡ç­¾åŽå›žè½¦æ·»åŠ ",class:"flex-1 p-3 rounded bg-white/5 outline-none border border-white/10 focus:border-sky-500"},null,544),[[T,v.value]]),i("button",{onClick:g,class:"px-4 py-3 bg-emerald-600 rounded hover:bg-emerald-700"},"æ·»åŠ æ ‡ç­¾")]),i("div",pa,[(s(!0),o(h,null,f(m.value,(e,t)=>(s(),o("div",{key:t,class:"bg-sky-600 px-3 py-1 rounded-full text-sm flex items-center gap-2"},[S(r(e)+" ",1),i("button",{onClick:e=>function(e){m.value.splice(e,1)}(t),class:"text-white/60 hover:text-white"},"âœ•",8,ma)]))),128))])]),i("div",{class:"flex gap-2 pt-4"},[i("button",{onClick:w,class:"flex-1 px-4 py-3 bg-sky-500 rounded hover:bg-sky-600 font-semibold"},"å‘é€ä»»åŠ¡")]),l[8]||(l[8]=i("div",{class:"text-sm text-gray-400"},"æ­¤ç•Œé¢é€‚åˆæ‰‹æœºæˆ– PC å¿«é€Ÿè¾“å…¥ï¼Œæ–°å»ºçš„ä»»åŠ¡ä¼šå®žæ—¶åŒæ­¥åˆ°å±•æ¿ã€‚",-1))])]),i("div",wa,[l[10]||(l[10]=i("h2",{class:"text-xl mb-4"},"ä»»åŠ¡åˆ—è¡¨",-1)),0===u(a).length?(s(),o("div",ga,"æš‚æ— ä»»åŠ¡")):k("",!0),i("ul",xa,[(s(!0),o(h,null,f(u(a),e=>(s(),o("li",{key:e.id,class:p(["bg-white/5 p-4 rounded border border-white/10 group transition-all",e.completed?"opacity-60":""])},[i("div",ya,[i("input",{type:"checkbox",checked:e.completed,onChange:()=>{return a=e.id,void t.toggleTask(a);var a},class:"mt-1"},null,40,ba),i("div",ka,[i("div",{class:p(["text-lg font-semibold",{"line-through text-gray-500":e.completed}])},r(e.name),3),e.description?(s(),o("div",{key:0,class:p(["text-sm mt-1",e.completed?"text-gray-500":"text-gray-300"])},r(e.description),3)):k("",!0),i("div",_a,[e.deadline?(s(),o("div",Ma," ðŸ“… "+r(e.deadline),1)):k("",!0),(s(!0),o(h,null,f(e.tags,e=>(s(),o("div",{key:e,class:"text-xs bg-sky-600/30 text-sky-200 px-2 py-1 rounded"},r(e),1))),128))]),i("div",{class:p(["text-xs mt-2",e.completed?"text-gray-600":"text-gray-500"])},r(new Date(e.createdAt).toLocaleString()),3)]),i("button",{onClick:a=>{return l=e.id,void(confirm("ç¡®è®¤åˆ é™¤æ­¤ä»»åŠ¡ï¼Ÿ")&&t.deleteTask(l));var l},class:"text-red-400 hover:text-red-300 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",title:"åˆ é™¤ä»»åŠ¡"}," ðŸ—‘ï¸ ",8,Ca)])],2))),128))])])]))}}),[["__scopeId","data-v-3ea263aa"]]),Sa={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},Ea={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},La={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},Da={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},Ia=te(me(a({__name:"App",setup(e){const t=l(1),a=l(!1),r=l(null),u=l(null),d="edit"===new URLSearchParams(window.location.search).get("mode"),v=l(null),h=ke(),{weatherData:f,showRainEffect:p,showThunderEffect:g,showSnowEffect:y}=b(h),M=n(()=>{var e,t;if(!f.value)return!1;const a=null!=(t=null==(e=f.value.current)?void 0:e.weather_code)?t:-1;if(p.value){if(a>=51&&a<=67||a>=80&&a<=82||a>=95&&a<=99)return!0}if(y.value){if(a>=71&&a<=77||85===a||86===a)return!0}if(g.value){if(95===a||96===a||99===a)return!0}return!1});let C=0,T=null;function S(){T&&(clearTimeout(T),T=null),1!==t.value&&(T=window.setTimeout(()=>{E(1)},3e4))}function E(e){t.value=e,S(),0===e&&r.value&&r.value.updateAllStates(),2===e&&u.value&&u.value.refreshToday()}function L(e){C=e.touches[0].clientX,S()}function D(e){e.preventDefault()}function I(e){const a=e.changedTouches[0].clientX-C,l=.2*window.innerWidth;if(!(Math.abs(a)<=l))if(a>0){const e=Math.max(t.value-1,0);e!==t.value&&E(e)}else{const e=Math.min(t.value+1,3);e!==t.value&&E(e)}}function j(e){C=e.clientX,S()}function N(e){const a=e.clientX-C,l=.2*window.innerWidth;if(!(Math.abs(a)<=l))if(a>0){const e=Math.max(t.value-1,0);e!==t.value&&E(e)}else{const e=Math.min(t.value+1,3);e!==t.value&&E(e)}}function O(){r.value&&r.value.updateAllStates()}return m(()=>{window.addEventListener("keydown",S),window.addEventListener("touchstart",S),window.addEventListener("click",S)}),w(()=>{window.removeEventListener("keydown",S),window.removeEventListener("touchstart",S),window.removeEventListener("click",S),T&&clearTimeout(T)}),(e,l)=>{var n;return s(),o("div",{ref_key:"viewportRef",ref:v,class:"viewport-container overflow-hidden relative w-screen h-screen bg-black",onTouchstart:L,onTouchmove:_(D,["prevent"]),onTouchend:I,onMousedown:j,onMouseup:N,style:{"user-select":"none","-webkit-user-select":"none"}},[d?(s(),U(Ta,{key:1})):(s(),o("div",{key:0,class:"main-slider flex h-full transition-transform duration-300 ease-in-out",style:x({transform:"translateX(-".concat(100*t.value,"vw)"),width:"400vw"})},[i("div",Sa,[c(Qt,{ref_key:"smartHomeRef",ref:r,onOpenSettings:l[0]||(l[0]=e=>a.value=!0)},null,512)]),i("div",Ea,[c(ft)]),i("div",La,[c(we,{ref_key:"calendarRef",ref:u},null,512)]),i("div",Da,[c(ua)])],4)),M.value?(s(),U(ea,{key:2})):k("",!0),c(Dt,{show:a.value,"entities-states":(null==(n=r.value)?void 0:n.entitiesStates)||{},onClose:l[1]||(l[1]=e=>a.value=!1),onSaved:O},null,8,["show","entities-states"])],544)}}}),[["__scopeId","data-v-d262ef2f"]])),ja=ae();ja.use(le),Ia.use(ja),Ia.mount("#app");export{e as __vite_legacy_guard};
